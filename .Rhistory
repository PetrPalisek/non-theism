H3.1_eval <- restriktor::goric(full_ordinal_pw_params[["est"]], VCOV = full_ordinal_pw_params[["VCOV"]],
hypotheses = list(
H3.1any = H3.1any), comparison = "complement")
H3.1_eval_ben <- benchmark(H3.1_eval)
H3.1full_eval_c <- restriktor::goric(full_ordinal_pw_params[["est"]], VCOV = full_ordinal_pw_params[["VCOV"]],
hypotheses = list(
H3.1partneg = H3.1partneg), comparison = "complement")
benchmark(H3.1full_eval_c)
H3.2part_eval <- restriktor::goric(full_ordinal_pw_params[["est"]], VCOV = full_ordinal_pw_params[["VCOV"]],
hypotheses = list(H3.2part = H3.2part,
H3.2full = H3.2full), comparison = "unconstrained")
H3.2part_eval_ben <- benchmark(H3.2part_eval)
H2.1_eval_ford
H2.2_eval_ben
H3.1full_eval_c
H3.1partneg
H3.1full_eval_c
H2.2_eval_ford
H2.2_eval_ben
H2.1_eval_ford_ben
H2.1_eval_ford
H2.1
H2.2
H2.2_eval_ford
H2.1_eval_ford
H2.1_eval_ford_ben
H3.1full_eval_c
H3.1full_eval_c_ben <- benchmark(H3.1full_eval_c)
H3.1full_eval_c_ben
H3.2full_eval
H3.2full_eval <- restriktor::goric(full_ordinal_pw_params[["est"]], VCOV = full_ordinal_pw_params[["VCOV"]],
hypotheses = list(
H3.2part = H3.2part), comparison = "complement")
H3.2part_eval_ben <- benchmark(H3.2part_eval)
H3.2part_eval_ben
H3.2full_eval
H3.2part_eval_ben
H3.2full_eval_ben <- benchmark(H3.2full_eval)
H3.2full_eval_ben
base_nest_fit <- lavaan::lavaan(model = baseline_nest, data = df_ml,
estimator = "MLR", parameterization = "theta",
meanstructure = T,
missing = "fiml", std.lv = T)
base_nest <- "
BiG1 ~ Male + BlackProt + Catholic + MainProt  + BlackE + LatinxE + OtherE
BiG2 ~ Male + BlackProt + Catholic + MainProt   + BlackE + LatinxE + OtherE
BiG3 ~ Male + BlackProt + Catholic + MainProt + BlackE + LatinxE + OtherE
BiG4 ~ Age + Male + BlackProt + Catholic + MainProt  + BlackE + LatinxE  + OtherE +
Inc3 + ParRit + College + HighSchool + PST
eta_BiG =~ BiG1 + 1*BiG2 + 1*BiG3 + 1*BiG4
BiG2 ~ BiG1 + 0*MS1
BiG3 ~ ar3*BiG2 + 0*MS1+ 0*H2 +0*T2 + PR2 + CR2
BiG4 ~ ar4*BiG3 + 0*MS1 + 0*H2 + 0*T2 + 0*H3 + 0*PR3 +  0*CR3
# Misc
MS1 ~ ParCollege + ParHighSchool + BlackE + LatinxE + OtherE
BlackProt ~ BlackE
Catholic ~ LatinxE
BlackProt + MainProt + Catholic ~ OtherE
College + HighSchool ~ ParCollege + ParHighSchool + Age + MS1
Inc3 ~ MS1
ParRit ~ ParCollege + ParHighSchool
PR3 ~  PR2 + 0*H2 + T2
# CR
CR3 ~ CR2 + H2 + 0*T2
"
base_nest_fit <- lavaan::sem(model = baseline_nest, data = df_ml,
estimator = "MLR", parameterization = "theta",
meanstructure = T,
missing = "fiml", std.lv = T)
summary(base_nest, std = T, fit = T)
summary(base_nest_fit, std = T, fit = T)
residuals(h1_nest_fit)
summary(h1_nest_fit, std = T, fit = T)
h1_nest_fit <- lavaan::sem(model = h1_nest, data = df_ml,
estimator = "MLR", parameterization = "theta",
meanstructure = T,
missing = "fiml", std.lv = F)
summary(h1_nest_fit, std = T, fit = T)
# Baseline ML model
base_ml <- "
BiG1 ~ 0*MS1
BiG2 ~ BiG1 + h1a*MS1
BiG3 ~ ar3*BiG2 + h1b*MS1
BiG4 ~ ar4*BiG3 + h1c*MS1
## MS1 -> BiG2 -> BiG3
ms1_big3 := h1a*ar3
## MS1 -> BiG3 -> BiG4
ms1_big4 := h1b*ar4
h1a_ := h1a
h1b_ := h1b
h1c_ := h1c
BiG1 ~ 0*1
BiG2 ~ NA*1
BiG3 ~ NA*1
BiG4 ~ NA*1
"
summary(base_fiml)
summary(base_fiml, std = T, fit = T)
varTable(base_fiml)
base_ml
summary(base_fiml, std = T, fit = T)
residuals(base_fiml)
# Baseline ML model
base_ml <- "
BiG1 ~ 0*MS1
BiG2 ~ BiG1 + h1a*MS1
BiG3 ~ ar3*BiG2 + h1b*MS1
BiG4 ~ ar4*BiG3 + h1c*MS1
eta_BiG =~ BiG1 + 1*BiG2 + 1*BiG3 + 1*BiG4
## MS1 -> BiG2 -> BiG3
ms1_big3 := h1a*ar3
## MS1 -> BiG3 -> BiG4
ms1_big4 := h1b*ar4
h1a_ := h1a
h1b_ := h1b
h1c_ := h1c
BiG1 ~ 0*1
BiG2 ~ NA*1
BiG3 ~ NA*1
BiG4 ~ NA*1
"
# baseline
base_fiml <- lavaan::sem(base_ml, df_ml, estimator = "MLR",
missing = "fiml", meanstructure = T, std.lv = T)
summary(base_fiml, std = T, fit = T)
base_ml
residuals(base_fiml)
residuals(base_fiml, "cor")
# Baseline ML model
base_ml <- "
BiG1 ~ 0*MS1
BiG2 ~ BiG1 + h1a*MS1
BiG3 ~ ar3*BiG2 + h1b*MS1
BiG4 ~ ar4*BiG3 + h1c*MS1
eta_BiG =~ BiG1 + 1*BiG2 + 1*BiG3 + 1*BiG4
## MS1 -> BiG2 -> BiG3
ms1_big3 := h1a*ar3
## MS1 -> BiG3 -> BiG4
ms1_big4 := h1b*ar4
h1a_ := h1a
h1b_ := h1b
h1c_ := h1c
"
# baseline
base_fiml <- lavaan::sem(base_ml, df_ml, estimator = "MLR",
missing = "fiml", meanstructure = T, std.lv = T)
summary(base_fiml, std = T, fit = T)
residuals(base_fiml, "cor")
# Baseline ML model
base_ml <- "
BiG2 ~ BiG1 + h1a*MS1
BiG3 ~ ar3*BiG2 + h1b*MS1
BiG4 ~ ar4*BiG3 + h1c*MS1
eta_BiG =~ BiG1 + 1*BiG2 + 1*BiG3 + 1*BiG4
## MS1 -> BiG2 -> BiG3
ms1_big3 := h1a*ar3
## MS1 -> BiG3 -> BiG4
ms1_big4 := h1b*ar4
h1a_ := h1a
h1b_ := h1b
h1c_ := h1c
BiG1 ~ 0*1
BiG2 ~ NA*1
BiG3 ~ NA*1
BiG4 ~ NA*1
"
# baseline
base_fiml <- lavaan::sem(base_ml, df_ml, estimator = "MLR",
missing = "fiml", meanstructure = T, std.lv = T)
summary(base_fiml, std = T, fit = T)
residuals(base_fiml, "cor")
semPaths(base_fiml)
semPaths(base_fiml, what = "std")
semPaths(base_fiml, what = "std")
# baseline
base_fiml <- lavaan::sem(base_ml, df_ml, estimator = "MLR",
missing = "fiml", meanstructure = T,
std.lv = T, fixed.x = F)
summary(base_fiml, std = T, fit = T)
# baseline
base_fiml <- lavaan::lavaan(base_ml, df_ml, estimator = "MLR",
missing = "fiml", meanstructure = T,
std.lv = T)
# baseline
base_fiml <- lavaan::sem(base_ml, df_ml, estimator = "MLR",
missing = "fiml", meanstructure = T,
std.lv = T)
fitmeasures(base_mi)
dfSummary(df_ml)
save.image("nontheism.RData")
load("~/non-theism/nontheism.RData")
# Baseline ML model
base_ml <- "
BiG2 ~ BiG1 + h1a*MS1
BiG3 ~ ar3*BiG2 + h1b*MS1
BiG4 ~ ar4*BiG3 + h1c*MS1
eta_BiG =~ BiG1 + 1*BiG2 + 1*BiG3 + 1*BiG4
## MS1 -> BiG2 -> BiG3
ms1_big3 := h1a*ar3
## MS1 -> BiG3 -> BiG4
ms1_big4 := h1b*ar4
h1a_ := h1a
h1b_ := h1b
h1c_ := h1c
BiG1 ~ 0*1
BiG2 ~ NA*1
BiG3 ~ NA*1
BiG4 ~ NA*1
"
# baseline
base_fiml <- lavaan::sem(base_ml, df_ml, estimator = "MLR",
missing = "fiml", meanstructure = T,
std.lv = T)
summary(base_fiml, std = T, fit = T)
library(lavaan)
library(semTools)
library(semPlot)
library(restriktor)
library(gorica)
library(qpcR)
library(readxl)
library(tidyverse)
library(fastDummies)
library(Amelia)
library(psych)
library(lavaan.mi)
library(summarytools)
source("https://raw.githubusercontent.com/PetrPalisek/gorica_helpers/main/extract_defined_params_lavaanmi.R")
source("https://raw.githubusercontent.com/PetrPalisek/gorica_helpers/main/extract_defined_params_lavaan.R")
set.seed(3333)
# baseline
base_fiml <- lavaan::sem(base_ml, df_ml, estimator = "MLR",
missing = "fiml", meanstructure = T,
std.lv = T)
summary(base_fiml, std = T, fit = T)
residuals(base_fiml, "cor")
fitmeasures(base_fiml)
summary(base_fiml, std = T, fit = T)
base_mi_ml <- lavaan.mi::sem.mi(base_ml, mice.imp_lin, meanstructure = T,
estimator = "MLR", missing = "fiml", std.lv = T)
fitmeasures(base_mi_ml)
# baseline
base_fiml <- lavaan::sem(base, df_ml, estimator = "MLR",
missing = "fiml", meanstructure = T,
std.lv = T)
summary(base_fiml, std = T, fit = T)
# baseline
base_fiml <- lavaan::sem(base_ml, df_ml, estimator = "MLR",
missing = "fiml", meanstructure = T,
std.lv = F)
summary(base_fiml, std = T, fit = T)
residuals(base_fiml, "cor")
fitmeasures(base_fiml)
summary(base_fiml, std = T, fit = T)
# baseline
base_fiml <- lavaan::sem(base_ml, df_ml, estimator = "MLR",
missing = "fiml", meanstructure = T,
std.lv = T)
summary(base_fiml, std = T, fit = T)
semPaths(base_fiml, what = "std")
# baseline
base_fiml <- lavaan::mimic(base_ml, df_ml, estimator = "MLR",
missing = "fiml", meanstructure = T,
std.lv = T)
?mimic
??mimic
?sem
# baseline
base_fiml <- lavaan::sem(base_ml, df_ml, estimator = "MLR",
missing = "fiml", meanstructure = T,
std.lv = T, int.ov.free = F, int.lv.drr = F)
# baseline
base_fiml <- lavaan::sem(base_ml, df_ml, estimator = "MLR",
missing = "fiml", meanstructure = T,
std.lv = T, int.ov.free = F, int.lv.free = F)
summary(base_fiml, std = T, fit = T)
# baseline
base_fiml <- lavaan::sem(base_ml, df_ml, estimator = "MLR",
missing = "fiml", meanstructure = T,
std.lv = T, int.ov.free = F, orthogonal.y = F)
summary(base_fiml, std = T, fit = T)
residuals(base_fiml, "cor")
summary(base_fiml, std = T, fit = T)
# baseline
base_fiml <- lavaan::sem(base_ml, df_ml, estimator = "MLR",
missing = "fiml", meanstructure = T,
std.lv = T, int.ov.free = F, orthogonal.x = F)
summary(base_fiml, std = T, fit = T)
residuals(base_fiml, "cor")
fitmeasures(base_fiml)
# baseline
base_fiml <- lavaan::sem(base_ml, df_ml, estimator = "MLR",
missing = "fiml", meanstructure = T,
std.lv = T, int.ov.free = F, auto.var = T)
summary(base_fiml, std = T, fit = T)
residuals(base_fiml, "cor")
fitmeasures(base_fiml)
# baseline
base_fiml <- lavaan::sem(base_ml, df_ml, estimator = "MLR",
missing = "fiml", meanstructure = T,
std.lv = T, int.ov.free = F, auto.cov.y = T)
summary(base_fiml, std = T, fit = T)
residuals(base_fiml, "cor")
fitmeasures(base_fiml)
# baseline
base_fiml <- lavaan::sem(base_ml, df_ml, estimator = "MLR",
missing = "fiml", meanstructure = T,
std.lv = T, int.ov.free = F, std.ov = T)
summary(base_fiml, std = T, fit = T)
residuals(base_fiml, "cor")
fitmeasures(base_fiml)
summary(base_fiml, std = T, fit = T)
# baseline
base_fiml <- lavaan::sem(base_ml, df_ml, estimator = "MLR",
missing = "fiml", meanstructure = T,
std.lv = T, std.ov = T)
summary(base_fiml, std = T, fit = T)
# baseline
base_fiml <- lavaan::sem(base_ml, df_ml, estimator = "MLR",
missing = "fiml", meanstructure = T,
std.lv = F, std.ov = T)
summary(base_fiml, std = T, fit = T)
residuals(base_fiml, "cor")
fitmeasures(base_fiml)
base_mi_fiml_params <- extract_defined_params_lavaan(base_fiml)
hypothesis <-  "h1a_ + h1b_ + h1c_ + ms1_big3 + ms1_big4 < 0"
H1_base_fiml <- restriktor::goric(base_mi_fiml_params[["est"]], VCOV = base_mi_fiml_params[["VCOV"]],
hypotheses = list(hypothesis), comparison = "complement")
H1_base
H1_base_ben_fiml <- benchmark(H1_base_fiml)
H1_base_ben_fiml
base_mi_fiml_params <- extract_defined_params_lavaan(base_fiml)
H1_base_fiml <- restriktor::goric(base_mi_fiml_params[["est"]], VCOV = base_mi_fiml_params[["VCOV"]],
hypotheses = list(hypothesis), comparison = "complement")
H1_base_ben_fiml <- benchmark(H1_base_fiml)
H1_base_fiml
H1_base_ben_fiml
controls_fiml <- lavaan::sem(controls_ml, df_ml, estimator = "MLR",
missing = "fiml", meanstructure = T,
std.lv = F, std.ov = T)
controls_mi_fiml_params <- extract_defined_params_lavaan(controls_fiml)
controls_fiml <- lavaan::sem(controls_ml, df_ml, estimator = "MLR",
missing = "fiml", meanstructure = T,
std.lv = F, std.ov = F)
controls_fiml <- lavaan::sem(controls_ml, df_ml, estimator = "MLR",
missing = "fiml", meanstructure = T,
std.lv = T, std.ov = F)
summary(base_fiml, std = T, fit = T)
summary(controls_fiml, std = T, fit = T)
controls_fiml <- lavaan::sem(controls_ml, df_ml, estimator = "MLR",
missing = "fiml", meanstructure = T,
std.lv = T, std.ov = T)
controls_fiml <- lavaan::sem(controls_ml, df_ml, estimator = "MLR",
missing = "fiml", meanstructure = T,
std.lv = F, std.ov = T)
summary(controls_fiml, std = T, fit = T)
warnings()
summary(controls_fiml, std = T, fit = T)
controls_fiml <- lavaan::sem(controls_ml, df_ml, estimator = "MLR",
missing = "fiml", meanstructure = T,
std.lv = T, std.ov = F)
summary(controls_fiml, std = T, fit = T)
full_fiml <- lavaan::sem(full_linear, df_ml, estimator = "MLR",
missing = "fiml",
meanstructure = T, std.lv = T, std.ov = T)
summary(full_fiml, std = T, fit = T)
full_linear <- "
BiG1 ~ Male + BlackProt + Catholic + MainProt  + BlackE + LatinxE + OtherE
BiG2 ~ Male + BlackProt + Catholic + MainProt   + BlackE + LatinxE + OtherE
BiG3 ~ Male + BlackProt + Catholic + MainProt + BlackE + LatinxE + OtherE
BiG4 ~ Age + Male + BlackProt + Catholic + MainProt  + BlackE + LatinxE  + OtherE +
Inc3 + ParRit + College + HighSchool + PST
BiG2 ~ BiG1 + h1a*MS1
BiG3 ~ ar3*BiG2 + h1b*MS1+ PR2 + CR2 + h2.1a*H2 + h2.2a*T2
BiG4 ~ ar4*BiG3 + h1c*MS1 + h2.1b*H2 + h2.2b*T2 + h3.1b*PR3 + h3.2b*CR3 + h2.1d*H3
eta_BiG =~ BiG1 + 1*BiG2 + 1*BiG3 + 1*BiG4
# Misc
MS1 ~ ParCollege + ParHighSchool + BlackE + LatinxE + OtherE
BlackProt ~ BlackE
Catholic ~ LatinxE
BlackProt + MainProt + Catholic ~ OtherE
College + HighSchool ~ ParCollege + ParHighSchool + Age + MS1
Inc3 ~ MS1
ParRit ~ ParCollege + ParHighSchool
# PR
PR3 ~  PR2 + MS1 + h3.1a*H2 + T2
# CR
CR3 ~ CR2 + H2 + h3.2a*T2
# H
H2 ~ ms1_h2*MS1
H3 ~ arH*H2
# T
T2 ~ MS1
## MS1 -> BiG2 -> BiG3
ms1_big3 := h1a*ar3
## MS1 -> BiG3 -> BiG4
ms1_big4 := h1b*ar4
## H2 -> BiG3 -> BiG4
h2_big4 := h2.1a*ar4
## T2 -> BiG3 -> BiG4
t2_big4 := h2.2a*ar4
## H2 -> H3 -> BiG4
h2_h3_big4 := arH*h2.1d
h1a_ := h1a
h1b_ := h1b
h1c_ := h1c
## H2 -> PR3 -> BiG4
h3.1indirect := h3.1a*h3.1b
h3.1direct := h2.1b
## T2 -> CR3 -> BiG4
h3.2indirect := h3.2a*h3.2b
h3.2direct := h2.2b
BiG1 ~ 0*1
BiG2 ~ NA*1
BiG3 ~ NA*1
BiG4 ~ NA*1
PR2 ~ 0*1
PR3 ~ NA*1
CR2 ~ 0*1
CR3 ~ NA*1
H2 ~ 0*1
H3 ~ NA*1
"
full_fiml <- lavaan::sem(full_linear, df_ml, estimator = "MLR",
missing = "fiml",
meanstructure = T, std.lv = T, std.ov = T)
full_fiml <- lavaan::sem(full_linear, df_ml, estimator = "MLR",
missing = "fiml",
meanstructure = T, std.lv = F, std.ov = T)
full_fiml <- lavaan::sem(full_linear, df_ml, estimator = "MLR",
missing = "fiml",
meanstructure = T, std.lv = F, std.ov = F)
summary(full_fiml, std = T, fit = T)
full_fiml <- lavaan::sem(full_linear, df_ml, estimator = "MLR",
missing = "fiml",
meanstructure = T, std.lv = F, std.ov = T)
summary(full_fiml, std = T, fit = T)
full_linear <- "
BiG1 ~ Male + BlackProt + Catholic + MainProt  + BlackE + LatinxE + OtherE
BiG2 ~ Male + BlackProt + Catholic + MainProt   + BlackE + LatinxE + OtherE
BiG3 ~ Male + BlackProt + Catholic + MainProt + BlackE + LatinxE + OtherE
BiG4 ~ Age + Male + BlackProt + Catholic + MainProt  + BlackE + LatinxE  + OtherE +
Inc3 + ParRit + College + HighSchool + PST
BiG2 ~ BiG1 + h1a*MS1
BiG3 ~ ar3*BiG2 + h1b*MS1+ PR2 + CR2 + h2.1a*H2 + h2.2a*T2
BiG4 ~ ar4*BiG3 + h1c*MS1 + h2.1b*H2 + h2.2b*T2 + h3.1b*PR3 + h3.2b*CR3 + h2.1d*H3
eta_BiG =~ BiG1 + 1*BiG2 + 1*BiG3 + 1*BiG4
# Misc
MS1 ~ ParCollege + ParHighSchool + BlackE + LatinxE + OtherE
BlackProt ~ BlackE
Catholic ~ LatinxE
BlackProt + MainProt + Catholic ~ OtherE
College + HighSchool ~ ParCollege + ParHighSchool + Age + MS1
Inc3 ~ MS1
ParRit ~ ParCollege + ParHighSchool
# PR
PR3 ~  PR2 + MS1 + h3.1a*H2 + T2
# CR
CR3 ~ CR2 + H2 + h3.2a*T2
# H
H2 ~ ms1_h2*MS1
H3 ~ arH*H2
# T
T2 ~ MS1
## MS1 -> BiG2 -> BiG3
ms1_big3 := h1a*ar3
## MS1 -> BiG3 -> BiG4
ms1_big4 := h1b*ar4
## H2 -> BiG3 -> BiG4
h2_big4 := h2.1a*ar4
## T2 -> BiG3 -> BiG4
t2_big4 := h2.2a*ar4
## H2 -> H3 -> BiG4
h2_h3_big4 := arH*h2.1d
h1a_ := h1a
h1b_ := h1b
h1c_ := h1c
## H2 -> PR3 -> BiG4
h3.1indirect := h3.1a*h3.1b
h3.1direct := h2.1b
## T2 -> CR3 -> BiG4
h3.2indirect := h3.2a*h3.2b
h3.2direct := h2.2b
"
full_fiml <- lavaan::sem(full_linear, df_ml, estimator = "MLR",
missing = "fiml",
meanstructure = T, std.lv = F, std.ov = T)
# baseline
base_fiml <- lavaan::sem(base_ml, df_ml, estimator = "MLR",
missing = "fiml", meanstructure = T,
std.lv = F, std.ov = T)
summary(base_fiml, std = T, fit = T)
controls_fiml <- lavaan::sem(controls_ml, df_ml, estimator = "MLR",
missing = "fiml", meanstructure = T,
std.lv = T, std.ov = F)
controls_fiml <- lavaan::sem(controls_ml, df_ml, estimator = "MLR",
missing = "fiml", meanstructure = T,
std.lv = F, std.ov = T)
summary(controls_fiml, std = T, fit = T)
controls_fiml <- lavaan::lavaan(controls_ml, df_ml, estimator = "MLR",
missing = "fiml", meanstructure = T,
std.lv = F, std.ov = T)
controls_fiml <- lavaan::sem(controls_ml, df_ml, estimator = "MLR",
missing = "fiml", meanstructure = T,
std.lv = F, std.ov = T)
lavInspect(base_fiml, what = "cor")
lavInspect(base_fiml, what = "cor.ov")
?lavInspect
lavInspect(base_fiml, what = "sampstat")
lavInspect(base_fiml, what = "mean.ov")
lavInspect(controls_fiml, what = "sampstat")
lavInspect(controls_fiml, what = "mean.ov")
